---
description: Subrule especÃ­fica para criaÃ§Ã£o e organizaÃ§Ã£o de subrules em sistemas de regras .mdc
alwaysApply: false
---

# Formatter Subrules Subrules

## Contexto de HeranÃ§a

- **Estende**: [Formatter Cursor Rule](../formatter-rule-core.mdc)
- **Adiciona**: Diretrizes para criaÃ§Ã£o e organizaÃ§Ã£o de subrules
- **Aplica**: PadrÃµes de formataÃ§Ã£o + sistema hierÃ¡rquico de subrules

## ğŸš¨ **Diretrizes Fundamentais**

### 1. CritÃ©rios de DivisÃ£o

1. **SEMPRE divida** quando arquivo >50 linhas
2. **SEMPRE divida** quando mÃºltiplos domÃ­nios tÃ©cnicos
3. **SEMPRE divida** quando globs muito amplos (>3 padrÃµes)
4. **SEMPRE divida** quando frameworks mÃºltiplos

### 2. Estrutura de Subrules

5. **SEMPRE crie** regra base com 30-40 linhas
6. **SEMPRE organize** subrules em diretÃ³rio dedicado
7. **SEMPRE use** nomenclatura consistente: `[domÃ­nio]-[especialidade].mdc`
8. **SEMPRE implemente** heranÃ§a clara com referÃªncias

### 3. OrganizaÃ§Ã£o de DiretÃ³rios

9. **SEMPRE crie** diretÃ³rio `[domÃ­nio]-subrules/`
10. **SEMPRE mantenha** regra base no nÃ­vel raiz
11. **SEMPRE organize** subrules logicamente por especialidade

### 4. PreservaÃ§Ã£o de Frontmatter Durante DivisÃ£o

12. **SEMPRE preserve** frontmatter original na regra base
13. **SEMPRE crie** frontmatter especÃ­fico para cada subrule
14. **SEMPRE verifique** integridade apÃ³s divisÃ£o

## ğŸ“‹ **Processo de DivisÃ£o Real - Passo a Passo**

#### Passo 1: AnÃ¡lise e IdentificaÃ§Ã£o

```bash
# âœ… SEMPRE faÃ§a primeiro
wc -l arquivo-principal.mdc  # Identificar tamanho atual
grep -n "## " arquivo-principal.mdc  # Mapear seÃ§Ãµes principais
```

#### Passo 2: Planejamento da DivisÃ£o

```bash
# âœ… SEMPRE planeje antes de implementar
# Identificar seÃ§Ãµes candidatas para subrules:
# - SeÃ§Ãµes >20 linhas
# - DomÃ­nios especÃ­ficos (idioma, estrutura, exemplos)
# - ConteÃºdo tÃ©cnico detalhado
```

#### Passo 3: ImplementaÃ§Ã£o da DivisÃ£o

```bash
# âœ… SEMPRE remova conteÃºdo do arquivo principal
search_replace
  old_string: "## SeÃ§Ã£o Extensa\n\nConteÃºdo detalhado..."
  new_string: "## SeÃ§Ã£o Extensa\n\n> **ğŸ“š Para detalhes, use**: [Subrule EspecÃ­fica](subrules/subrule.mdc)"

# âœ… SEMPRE crie subrule com frontmatter correto
edit_file
  target_file: subrules/subrule.mdc
  instructions: "Criar subrule com frontmatter completo"
  code_edit: "---\ndescription: DescriÃ§Ã£o especÃ­fica\nalwaysApply: false\n---\n\n# ConteÃºdo da Subrule"
```

#### Passo 4: ValidaÃ§Ã£o ObrigatÃ³ria

```bash
# âœ… SEMPRE valide apÃ³s implementaÃ§Ã£o
wc -l arquivo-principal.mdc  # Confirmar reduÃ§Ã£o
wc -l subrules/*.mdc  # Verificar tamanho das subrules
# Testar referÃªncias  manualmente
```

## ğŸ”§ **TÃ©cnicas de PreservaÃ§Ã£o de Frontmatter Durante DivisÃ£o**

### **Backup Antes da DivisÃ£o**

```bash
# âœ… SEMPRE faÃ§a backup primeiro
read_file arquivo_principal.mdc antes da divisÃ£o
```

### **PreservaÃ§Ã£o de Frontmatter na Regra Base**

```bash
# âœ… SEMPRE preserve frontmatter original
search_replace
  old_string: "---\nfrontmatter_original\n---\n\n# TÃ­tulo"
  new_string: "---\nfrontmatter_original\n---\n\n# TÃ­tulo\n\n> **ğŸ“š Para detalhes, use**: [Subrule](subrules/subrule.mdc)"
```

### **CriaÃ§Ã£o de Frontmatter para Subrules**

```bash
# âœ… SEMPRE crie frontmatter especÃ­fico
edit_file
  target_file: subrules/subrule.mdc
  instructions: "Criar subrule com frontmatter especÃ­fico"
  code_edit: "---\ndescription: Subrule especÃ­fica para [domÃ­nio]\nalwaysApply: false\n---\n\n# [Nome da Subrule]"
```

### **VerificaÃ§Ã£o PÃ³s-DivisÃ£o**

```bash
# âœ… SEMPRE verifique apÃ³s divisÃ£o
read_file arquivo_principal.mdc para confirmar frontmatter intacto
read_file subrules/*.mdc para confirmar frontmatter correto
```

## ğŸ¯ **Checklist de DivisÃ£o Real**

**ANTES da implementaÃ§Ã£o**:

- [ ] Arquivo principal >100 linhas identificado
- [ ] SeÃ§Ãµes candidatas mapeadas
- [ ] Plano de divisÃ£o criado
- [ ] Backup do arquivo original feito

**DURANTE a implementaÃ§Ã£o**:

- [ ] SeÃ§Ãµes extensas removidas do arquivo principal
- [ ] ReferÃªncias Ã s subrules adicionadas
- [ ] Subrules criadas com frontmatter correto
- [ ] Sistema de heranÃ§a implementado

**APÃ“S a implementaÃ§Ã£o**:

- [ ] Arquivo principal reduzido em pelo menos 15%
- [ ] Todas as subrules tÃªm frontmatter correto
- [ ] ReferÃªncias `` funcionando
- [ ] Sistema de heranÃ§a testado e funcional

## ğŸ“š **Tipos de Subrules**

#### 1. **Subrules de Framework/Library**

- **Base**: Regra geral da linguagem (ex: JavaScript)
- **Subrule**: Framework especÃ­fico (ex: Express.js, React, Vue)
- **BenefÃ­cio**: Herda padrÃµes da base + adiciona especificidades

#### 2. **Subrules de DomÃ­nio**

- **Base**: Regra geral de desenvolvimento
- **Subrule**: DomÃ­nio especÃ­fico (ex: Frontend, Backend, Mobile)
- **BenefÃ­cio**: Aplica padrÃµes gerais ao contexto especÃ­fico

#### 3. **Subrules de PadrÃ£o**

- **Base**: Regra de arquitetura geral
- **Subrule**: PadrÃ£o especÃ­fico (ex: MVC, Repository, Observer)
- **BenefÃ­cio**: Implementa padrÃµes arquiteturais especÃ­ficos

## ğŸ”§ **Diretrizes para CriaÃ§Ã£o de Subrules**

#### Estrutura Recomendada

```yaml
---
description: Subrule especÃ­fica para [Framework/DomÃ­nio] que estende [Rule Base]
alwaysApply: false
---
# [Nome da Subrule]

## Contexto de HeranÃ§a
- **Estende**: [Link para rule base](base-rule.mdc)
- **Adiciona**: Funcionalidades especÃ­ficas para [contexto]
- **Aplica**: PadrÃµes da base + especificidades do domÃ­nio

## Diretrizes EspecÃ­ficas
[ConteÃºdo especÃ­fico da subrule]

## IntegraÃ§Ã£o com Base
- **PadrÃµes Herdados**: [Lista de padrÃµes da base aplicados]
- **ExtensÃµes**: [Funcionalidades especÃ­ficas adicionadas]
- **ExceÃ§Ãµes**: [Casos onde a base nÃ£o se aplica]
```

## ğŸ“š **Exemplos de AplicaÃ§Ã£o**

#### CenÃ¡rio: Desenvolvimento Full-Stack

```
JavaScript Base Rules (js-base.mdc)
â”œâ”€â”€ Frontend Subrules (frontend-subrules.mdc)
â”‚   â”œâ”€â”€ React Subrules (react-subrules.mdc)
â”‚   â””â”€â”€ Vue Subrules (vue-subrules.mdc)
â””â”€â”€ Backend Subrules (backend-subrules.mdc)
    â”œâ”€â”€ Express Subrules (express-subrules.mdc)
    â””â”€â”€ Node.js Subrules (node-subrules.mdc)
```

#### CenÃ¡rio: Arquitetura de Software

```
Software Architecture Base (arch-base.mdc)
â”œâ”€â”€ Design Patterns Subrules (patterns-subrules.mdc)
â”‚   â”œâ”€â”€ Creational Patterns (creational-patterns.mdc)
â”‚   â”œâ”€â”€ Structural Patterns (structural-patterns.mdc)
â”‚   â””â”€â”€ Behavioral Patterns (behavioral-patterns.mdc)
â””â”€â”€ Architecture Styles Subrules (styles-subrules.mdc)
    â”œâ”€â”€ MVC Subrules (mvc-subrules.mdc)
    â””â”€â”€ Microservices Subrules (microservices-subrules.mdc)
```

## ğŸ”„ **Processo de ImplementaÃ§Ã£o de Subrules**

#### Fase 1: AnÃ¡lise e Planejamento

1. **Identificar regra candidata**: Arquivo >50 linhas ou mÃºltiplos domÃ­nios
2. **Mapear responsabilidades**: Listar todas as seÃ§Ãµes e funcionalidades
3. **Definir critÃ©rios de divisÃ£o**: Por domÃ­nio, framework ou tipo de arquivo
4. **Criar estrutura de diretÃ³rios**: Organizar subrules logicamente

#### Fase 2: CriaÃ§Ã£o da Regra Base

1. **Extrair padrÃµes fundamentais**: Regras que se aplicam universalmente
2. **Manter responsabilidades core**: Funcionalidades essenciais do domÃ­nio
3. **Reduzir para 30-40 linhas**: Foco em diretrizes principais
4. **Adicionar referÃªncias**: Links para subrules especializadas

#### Fase 3: ImplementaÃ§Ã£o das Subrules

1. **Criar cada subrule**: Seguindo estrutura obrigatÃ³ria
2. **Implementar heranÃ§a**: ReferÃªncias claras para regra base
3. **Validar globs**: Testar padrÃµes de arquivo
4. **Verificar conteÃºdo Ãºnico**: Sem duplicaÃ§Ã£o com base ou outras subrules

#### Fase 4: ValidaÃ§Ã£o e Teste

1. **Testar funcionalidade**: Cada subrule funciona independentemente
2. **Verificar referÃªncias**: Links entre base e subrules funcionando
3. **Validar estrutura**: Seguindo padrÃµes estabelecidos
4. **Confirmar eficiÃªncia**: ReduÃ§Ã£o de tokens e melhoria de foco

## IntegraÃ§Ã£o com Base

- **PadrÃµes Herdados**: Modularidade e composiÃ§Ã£o, clareza atravÃ©s de estrutura
- **ExtensÃµes**: Sistema hierÃ¡rquico, critÃ©rios de divisÃ£o, organizaÃ§Ã£o de diretÃ³rios
- **ExceÃ§Ãµes**: Nenhuma - todos os padrÃµes base se aplicam

## Contexto Adicional

- **Quando aplicar**: Sempre ao planejar divisÃ£o de regras complexas
- **AutomaÃ§Ã£o**: Use templates de subrules para consistÃªncia estrutural
- **Quando aplicar**: Sempre ao planejar divisÃ£o de regras complexas
- **AutomaÃ§Ã£o**: Use templates de subrules para consistÃªncia estrutural

---
description: Regras espec√≠ficas para Chrome DevTools MCP - integra√ß√£o com assistentes de IA para an√°lise de performance e debugging avan√ßado
alwaysApply: false
---

# üöÄ Chrome DevTools MCP - Regras Espec√≠ficas

> **üéØ Objetivo**: Aplicar Chrome DevTools MCP para an√°lise de performance, debugging avan√ßado e automa√ß√£o de navegador com assistentes de IA, seguindo melhores pr√°ticas de integra√ß√£o e uso eficiente.

## 1. **An√°lise de Performance**

### 1.1 **Core Web Vitals Obrigat√≥rios**

- [ ] **SEMPRE capture** LCP (Largest Contentful Paint) com breakdown detalhado
- [ ] **SEMPRE analise** FCP (First Contentful Paint) para primeiro conte√∫do
- [ ] **SEMPRE me√ßa** CLS (Cumulative Layout Shift) para estabilidade visual
- [ ] **SEMPRE avalie** INP (Interaction to Next Paint) para responsividade
- [ ] **SEMPRE monitore** TTFB (Time to First Byte) para tempo de servidor

### 1.2 **Comandos de Performance**

```javascript
// ‚úÖ CORRETO: Trace completo de performance
performance_start_trace({ reload: true, autoStop: true });

// ‚úÖ CORRETO: An√°lise de insights espec√≠ficos
performance_analyze_insight({ insightName: "DocumentLatency" });
performance_analyze_insight({ insightName: "LCPBreakdown" });

// ‚úÖ CORRETO: Parada de trace
performance_stop_trace();
```

### 1.3 **M√©tricas de Qualidade**

- [ ] **SEMPRE valide** LCP < 2.5s (Bom), < 4.0s (Precisa melhorar)
- [ ] **SEMPRE confirme** FCP < 1.8s (Bom), < 3.0s (Precisa melhorar)
- [ ] **SEMPRE verifique** CLS < 0.1 (Bom), < 0.25 (Precisa melhorar)
- [ ] **SEMPRE teste** INP < 200ms (Bom), < 500ms (Precisa melhorar)

## 2. **Debugging e Investiga√ß√£o**

### 2.1 **An√°lise de Console**

- [ ] **SEMPRE liste** mensagens do console: `list_console_messages()`
- [ ] **SEMPRE avalie** scripts no contexto: `evaluate_script({ function: "() => { return document.title }" })`
- [ ] **SEMPRE identifique** erros JavaScript e warnings
- [ ] **SEMPRE monitore** logs de aplica√ß√£o em tempo real

### 2.2 **An√°lise de Rede**

- [ ] **SEMPRE liste** todas as requisi√ß√µes: `list_network_requests()`
- [ ] **SEMPRE analise** requisi√ß√µes espec√≠ficas: `get_network_request({ url: "https://api.example.com/data" })`
- [ ] **SEMPRE identifique** requisi√ß√µes lentas e falhas
- [ ] **SEMPRE monitore** tempo de resposta e status codes

### 2.3 **Captura de Evid√™ncias**

```javascript
// ‚úÖ CORRETO: Screenshot da p√°gina completa
take_screenshot({ fullPage: true });

// ‚úÖ CORRETO: Screenshot de elemento espec√≠fico
take_screenshot({ uid: "element-uid" });

// ‚úÖ CORRETO: Snapshot do DOM
take_snapshot();
```

## 3. **Automa√ß√£o de Intera√ß√µes**

### 3.1 **Navega√ß√£o e Controle**

- [ ] **SEMPRE navegue** para URLs: `navigate_page({ url: "https://example.com" })`
- [ ] **SEMPRE liste** p√°ginas abertas: `list_pages()`
- [ ] **SEMPRE feche** p√°ginas desnecess√°rias: `close_page({ pageIdx: 0 })`
- [ ] **SEMPRE selecione** p√°gina ativa: `select_page({ pageIdx: 0 })`

### 3.2 **Intera√ß√µes com Elementos**

```javascript
// ‚úÖ CORRETO: Clicar em elemento
click({ uid: "button-uid" });

// ‚úÖ CORRETO: Preencher campo
fill({ uid: "input-uid", value: "texto" });

// ‚úÖ CORRETO: Hover sobre elemento
hover({ uid: "menu-uid" });

// ‚úÖ CORRETO: Arrastar elemento
drag({ from_uid: "source-uid", to_uid: "target-uid" });
```

### 3.3 **Preenchimento de Formul√°rios**

```javascript
// ‚úÖ CORRETO: Preencher m√∫ltiplos campos
fill_form({
  elements: [
    { uid: "name-input", value: "Jo√£o Silva" },
    { uid: "email-input", value: "joao@example.com" },
  ],
});
```

## 4. **Configura√ß√µes Avan√ßadas**

### 4.1 **Op√ß√µes de Configura√ß√£o**

- [ ] **SEMPRE use** `--headless` para execu√ß√£o sem interface
- [ ] **SEMPRE configure** `--executablePath` para Chrome personalizado
- [ ] **SEMPRE escolha** `--channel` apropriado (stable, canary, beta, dev)
- [ ] **SEMPRE use** `--isolated` para dados tempor√°rios

### 4.2 **Emula√ß√£o de Condi√ß√µes**

```javascript
// ‚úÖ CORRETO: Emular CPU lenta
emulate_cpu({ throttlingRate: 4 });

// ‚úÖ CORRETO: Emular rede lenta
emulate_network({ throttlingOption: "Slow 3G" });

// ‚úÖ CORRETO: Redimensionar janela
resize_page({ width: 1920, height: 1080 });
```

### 4.3 **Upload de Arquivos**

```javascript
// ‚úÖ CORRETO: Upload de arquivo
upload_file({ uid: "file-input-uid", filePath: "/path/to/file.pdf" });
```

## 5. **Casos de Uso Espec√≠ficos**

### 5.1 **Verifica√ß√£o de Performance**

```text
Prompt: "Verifique o LCP de web.dev"
```

### 5.2 **Debugging de Problemas**

```text
Prompt: "Algumas imagens em localhost:8080 n√£o est√£o carregando. O que est√° acontecendo?"
```

### 5.3 **Teste de Funcionalidades**

```text
Prompt: "Por que o envio do formul√°rio falha ap√≥s inserir um endere√ßo de e-mail?"
```

### 5.4 **An√°lise de Layout**

```text
Prompt: "A p√°gina em localhost:8080 parece estranha e desalinhada. Verifique o que est√° acontecendo."
```

## 6. **Troubleshooting Comum**

### 6.1 **Problemas de Performance**

- [ ] **Trace muito longo**: Use `autoStop: true` para parada autom√°tica
- [ ] **Mem√≥ria insuficiente**: Reduza dura√ß√£o do trace ou use `--isolated`
- [ ] **Timeout**: Aumente timeout para p√°ginas complexas
- [ ] **P√°gina n√£o carrega**: Verifique URL e conectividade

### 6.3 **Problemas de Integra√ß√£o**

- [ ] **MCP n√£o conecta**: Verifique configura√ß√£o do cliente MCP
- [ ] **Ferramentas n√£o aparecem**: Reinicie o cliente ap√≥s configura√ß√£o
- [ ] **Erros de permiss√£o**: Verifique se o servidor MCP tem acesso ao Chrome
- [ ] **Elementos n√£o encontrados**: Confirme se p√°gina carregou completamente

## 7. **Considera√ß√µes de Seguran√ßa**

### 7.1 **Exposi√ß√£o de Dados**

- [ ] **SEMPRE evite** compartilhar informa√ß√µes sens√≠veis
- [ ] **SEMPRE use** modo `--isolated` para dados tempor√°rios
- [ ] **SEMPRE limpe** dados ap√≥s uso em ambientes compartilhados
- [ ] **SEMPRE monitore** atividades de debugging

### 7.2 **Controle de Acesso**

- [ ] **SEMPRE configure** permiss√µes adequadas
- [ ] **SEMPRE use** ambientes isolados para testes
- [ ] **SEMPRE limite** acesso a dados sens√≠veis
- [ ] **SEMPRE documente** atividades de debugging

## 8. **Ferramentas Complementares**

### 8.1 **Lighthouse CLI**

```bash
# ‚úÖ CORRETO: An√°lise completa de performance
npx lighthouse https://web.dev --only-categories=performance --output=json --quiet

# ‚úÖ CORRETO: Extra√ß√£o de dados espec√≠ficos
jq '.audits["largest-contentful-paint"]' lighthouse-report.json
```

### 8.2 **Chrome Remote Debugging**

```bash
# ‚úÖ CORRETO: Iniciar Chrome com debugging
google-chrome --remote-debugging-port=9222 --user-data-dir=/tmp/chrome-debug

# ‚úÖ CORRETO: Verificar inst√¢ncia
curl -s http://127.0.0.1:9222/json
```

## 9. **Valida√ß√£o e Qualidade**

### 9.1 **Checklist de Valida√ß√£o**

- [ ] **Configura√ß√£o**: MCP configurado e funcionando
- [ ] **Performance**: M√©tricas Core Web Vitals capturadas
- [ ] **Debugging**: Console e rede analisados
- [ ] **Automa√ß√£o**: Intera√ß√µes funcionando corretamente
- [ ] **Seguran√ßa**: Dados sens√≠veis protegidos

### 9.2 **M√©tricas de Sucesso**

- [ ] **LCP**: < 2.5s (Bom)
- [ ] **FCP**: < 1.8s (Bom)
- [ ] **CLS**: < 0.1 (Bom)
- [ ] **INP**: < 200ms (Bom)
- [ ] **TTFB**: < 800ms (Bom)

## 10. **Refer√™ncias e Recursos**

### 10.1 **Documenta√ß√£o Oficial**

- [GitHub Chrome DevTools MCP](https://github.com/ChromeDevTools/chrome-devtools-mcp)
- [Chrome DevTools Blog](https://developer.chrome.com/blog/chrome-devtools-mcp)
- [Model Context Protocol](https://modelcontextprotocol.io/)

### 10.2 **Ferramentas Relacionadas**

- [Puppeteer](https://pptr.dev/) - Automa√ß√£o de navegador
- [Lighthouse](https://developers.google.com/web/tools/lighthouse) - An√°lise de performance
- [Chrome DevTools Protocol](https://chromedevtools.github.io/devtools-protocol/) - Protocolo de debugging

**Automa√ß√£o**: Configure scripts para valida√ß√£o autom√°tica de m√©tricas Core Web Vitals
